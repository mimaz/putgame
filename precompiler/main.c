/*
 * Mieszko Mazurek <mimaz@gmx.com> 
 * 2018
 */

#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>
#include <dirent.h>
#include <stdlib.h>

#include <sys/stat.h>

extern void resource(int argc, char **argv);
extern void header(int argc, char **argv);

struct funopt
{
    void (*fun)(int, char **);
    const char *opt;
};

static struct funopt optset[] = {
    { resource, "source" },
    { header, "header" }
};

#define funcnt (sizeof(optset) / sizeof(struct funopt))

const char *author_message =
    "/*\n" 
    " * File auto-generated by putgame resource precompiler\n" 
    " *\n"
    " * Mieszko Mazurek <mimaz@gmx.com>\n"
    " * 2018\n"
    " */\n";

int main(int argc, char **argv)
{
    const char *opt;
    int i;

    if (argc < 2)
    {
        fprintf(stderr, "invalid usage\n");
        return 1;
    }

    opt = argv[1];


    for (i = 0; i < funcnt; i++)
    {
        if (strcmp(optset[i].opt, opt) == 0)
        {
            optset[i].fun(argc, argv);

            return 0;
        }
    }

    fprintf(stderr, "invalid opt: %s\n", opt);

    return 1;
}
